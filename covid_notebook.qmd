---
title: "Impact de la COVID-19 sur les déplacements de personnes en Wallonie"
author: "Alex Godin, Jeff Loiseau, Valentin Picart, Valentin Vandenbosche"
format:
  html:
    code-fold: true
    code-tools: true
    toc: true
editor: visual
lang: fr
---

<!--# Ceci est un commentaire. -->

<!--% Ceci est une consigne. Ne jamais modifier ni déplacer les consignes dans le document ! -->

<!--% Complétez le titre et le nom des auteurs (auteur1, auteur2, auteur3 et auteur 4) dans l'entête YAML.-->

## Introduction et but

<!--% Rédigez une courte introduction de 3 ou 5 phrases qui présente vos données. Ajoutez une phrase de but. Vous devez citer la bibliographie en utilisant le formatage Markdown ad hoc et en incluant votre référence au format bibtex dans le fichier references.bib. -->

... Introduction et but...

## Matériel et méthodes

<!--% Indiquez ici d'où viennent les données et aussi quel logiciel (et version) vous utilisez pour les analyses. Inspirez-vous des projets déjà réalisés. -->

Nous avons utilisé les *Community Mobility Reports* de Google, basés sur des données anonymisées de Google Maps, afin d’analyser les variations de mobilité liées aux mesures COVID-19. Les données mobilisent différentes catégories de lieux (travail, commerces, loisirs, transports, résidentiel).

Les rapports n’étant plus mis à jour depuis octobre 2022, nous avons exploité les données historiques pour la Wallonie sur les années 2020, 2021 et 2022, avec un focus particulier sur 2020 et 2021. Une application intéractive est disponible à l'adresse suivante <https://dimiter.shinyapps.io/covid-19_mobility/> , permet de visualiser de manière dynamique les données.

L'analyse est réalisée avec la SciViews Box 2025 dans Saturn Cloud (Linux Ubuntu 22.04), utilisant le logiciel R (r R.version.string). Le package {pastecs} version r packageVersion("pastecs") est utilisé pour étudier la série temporelle.

## Analyses

<!--% Lisez bien les éléments devant guider votre analyse proposée dans le README.-->

```{r setup, include=FALSE}
# Nécessaire pour les tests SDD, ne pas utiliser dans un "vrai" projet
if (!"tools:tests" %in% search())
  source(here::here("tests/tools_tests.R"), attach(NULL, name = "tools:tests"))
# Configuration de l'environnement
SciViews::R("ts", lang = "fr")
```

<!--% Ajoutez le nombre de chunks que vous souhaitez. Répartissez-vous le travail correctement. Structurez la section en partie avec des titres explicites de niveau trois.-->

# Importation

```{r import}
# Importation
covid <- read("data/mobility_wallonia.rds")
```

# Nettoyage des données

```{r cleannig}
#Nettoyage du tableau
covid <- labelise(covid, label=list( retail_and_recreation_percent_change_from_baseline="com_loi",grocery_and_pharmacy_percent_change_from_baseline="alim_pharma", parks_percent_change_from_baseline="parcs", transit_stations_percent_change_from_baseline="tec", workplaces_percent_change_from_baseline="travail", residential_percent_change_from_baseline="residence"))
covid <- covid %>%
  rename(com_loi = retail_and_recreation_percent_change_from_baseline,
    alim_pharma = grocery_and_pharmacy_percent_change_from_baseline,
    parcs = parks_percent_change_from_baseline,
    tec = transit_stations_percent_change_from_baseline,
    travail = workplaces_percent_change_from_baseline,
    residence = residential_percent_change_from_baseline)
```

### Manipulation de séries temporelles

```{r week}
# Copie de la série initiale sous une autre nom
covidw <- covid
# Calcul des jours de la semaine
covidw$weekdays <- weekdays(as.POSIXct(covidw$date))
# Les données du week-end sont remplacées par des valeurs manquantes
covidw[covidw$weekdays == "Saturday" | covidw$weekdays == "Sunday" , 2:7] <- NA 
# La série temporelle est créée (début le 15 février 2020 = 46e jour de l'année 2020)
covidw_ts <- ts(covidw$parcs, start = c(2020, 46), frequency = 365)
plot(covidw_ts)
# Aggrégation par moyenne des valeurs par semaine
covidw_ts2 <- aggregate(covidw_ts, 52, FUN = collapse::fmean, ts.eps = 1/52)
plot(covidw_ts2)
```

# Alex

continue

```{r acf}

```

bla

# Jeff

```{r}
covid
```

bla

# Valentin P

bla

```{r}
covid_ts <- ts(covid, start=c(2020, 46),end=c(2021, 365), frequency=365)
head(covid_ts)
```

bla

# Valentin V

bla

```{r}
covid_ts_Valou <- ts(covid, start = c(2021, 1), end = c(2022, 1), frequency = 12)
statsl_2021 <- stat.slide(covid_ts_Val[, "date"])
statsl_2021
```

bla

### Analyse de séries temporelles

# Alex

bla

```{r}

```

bla

# Jeff

bla

```{r}

```

bla

# Valentin P

bla

```{r}

```

bla

# Valentin V

bla

```{r}

```

bla

## Conclusion

<!--% Lorsque toutes les analyses sont réalisées, terminez ce bloc-notes avec 3 à 6 phrases de conclusion en rapport avec ce que vous avez observé dans vos analyses. Quels sont les éléments les plus pertinents que vous retenez ? -->

...vos conclusions ici...
