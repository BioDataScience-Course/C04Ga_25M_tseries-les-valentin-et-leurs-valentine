---
title: "Impact de la COVID-19 sur les déplacements de personnes en Wallonie"
author: "Alex Godin, Jeff Loiseau, Valentin Picart, Valentin Vandenbosche"
format:
  pdf:
    documentclass: report
    toc: true
editor: visual
lang: fr
bibliography: references.bib
---

<!--# Ce travail doit faire entre 15 et 20 pages.-->

<!--# Un rapport est différent d'un carnet de notes. Il ne s'agit donc pas de faire du copier-coller d'un document vers l'autre. Un rapport de synthèse doit être compréhensible sans devoir lire le carnet de notes. Le rapport de synthèse doit être  rédigé avec un style et une présentation adéquats. -->

## Introduction

<!--% Rédigez l'introduction de ce rapport.-->

La pandémie de COVID‑19, causée par le SARS‑CoV‑2 apparu fin 2019 en Chine, a été déclarée pandémie mondiale par l’OMS le 11 mars 2020 [@universalis2020]. Elle a entraîné plusieurs vagues successives, marquées par l’émergence de variants et des mesures de confinement à l’échelle planétaire [@wikipediaChronologie2020].

En Europe, la propagation rapide du virus a conduit à des restrictions majeures dès le printemps 2020, avec fermetures de frontières, confinement et campagnes de vaccination massives [@touteleurope2020].

En Belgique, le premier cas a été confirmé le 4 février 2020 à Bruxelles [@wikipediaBelgique2020]. Le pays a connu plusieurs vagues sévères, notamment en mars et novembre 2020, entraînant des confinements stricts et une forte pression sur les hôpitaux. Selon Sciensano, plus de 4,6 millions de cas et près de 33 500 décès ont été enregistrés début 2023 [@wikipediaBelgique2020].

La campagne de vaccination, lancée fin 2020, a permis de réduire la gravité des infections et de stabiliser la situation sanitaire en 2022. La phase fédérale de gestion de crise a pris fin en mars 2022, marquant le passage à une surveillance épidémiologique régulière [@centredecrise2022].

## But

<!--% Rédigez le but de ce rapport.-->

L’objectif de cette étude est d’analyser l’évolution de la mobilité de la population en Wallonie durant la pandémie de COVID-19 entre 2020 et 2022, à partir des données de mobilité communautaire de Google, afin de mettre en évidence l’impact des différentes mesures sanitaires sur les comportements de déplacement selon les principaux types de lieux.

## Matériel et méthodes

<!--% Cette section doit comprendre deux parties. La première partie doit expliciter le données employées et la seconde traiter des analyses réalisées et des logiciels employés.-->

Nous avons utilisé les *Community Mobility Reports* de Google, basés sur des données anonymisées de Google Maps, afin d’analyser les variations de mobilité liées aux mesures COVID-19.

Les rapports n’étant plus mis à jour depuis octobre 2022, nous avons exploité les données historiques pour la Wallonie sur les années 2020, 2021 et 2022, avec un focus particulier sur 2020 et 2021. Une application interactive est disponible à l'adresse suivante <https://dimiter.shinyapps.io/covid-19_mobility/> , permet de visualiser de manière dynamique les données.

Ces données sont exprimées en variation de pourcentage par rapport à une période de référence pré-pandémique, correspondant à la médiane des déplacements observés entre le 3 janvier et le 6 février 2020. Elles sont structurées en six grandes catégories : commerces et loisirs ("com_loi"), épiceries et pharmacies ("alim_pharma"), parcs ("parcs"), transports en commun ("tec"), lieux de travail ("travail")et lieux de résidence ("residence").

L'analyse est réalisée avec la SciViews Box 2025 dans Saturn Cloud (Linux Ubuntu 22.04), utilisant le logiciel R (r R.version.string). Le package {pastecs} version r packageVersion("pastecs") est utilisé pour étudier la série temporelle.

## Résultats

<!--% Présentez les analyses les plus pertinents que vous avez sélectionnés. Structurez la section en partie avec des titres explicites de niveau trois.-->

```{r setup}
# Nécessaire pour les tests SDD, ne pas utiliser dans un "vrai" projet
if (!"tools:tests" %in% search())
  source(here::here("tests/tools_tests.R"), attach(NULL, name = "tools:tests"))
# Configuration de l'environnement
SciViews::R("ts", lang = "fr")
```

```{r Import}
# Importation
covid <- read("data/mobility_wallonia.rds")
```

```{r Cleaning}
#Nettoyage du tableau
covid <- covid %>%
  rename(com_loi = retail_and_recreation_percent_change_from_baseline,
    alim_pharma = grocery_and_pharmacy_percent_change_from_baseline,
    parcs = parks_percent_change_from_baseline,
    tec = transit_stations_percent_change_from_baseline,
    travail = workplaces_percent_change_from_baseline,
    residence = residential_percent_change_from_baseline)
```

```{r Week}
# Copie de la série initiale sous une autre nom
covidw <- covid
# Calcul des jours de la semaine
covidw$weekdays <- weekdays(as.POSIXct(covidw$date))
# Les données du week-end sont remplacées par des valeurs manquantes
covidw[covidw$weekdays == "Saturday" | covidw$weekdays == "Sunday" , 2:7] <- NA 
# La série temporelle est créée (début le 15 février 2020 = 46e jour de l'année 2020)
covidw_ts <- ts(covidw$parcs, start = c(2020, 46), frequency = 365)
plot(covidw_ts)
# Aggrégation par moyenne des valeurs par semaine
covidw_ts2 <- aggregate(covidw_ts, 52, FUN = collapse::fmean, ts.eps = 1/52)
plot(covidw_ts2)

# Copie de la série initiale sous un autre nom
covidwe <- covid

# Calcul des jours de la semaine
covidwe$weekdays <- weekdays(as.POSIXct(covidwe$date))

# Les données des jours de semaine sont remplacées par des valeurs manquantes
covidwe[!(covidwe$weekdays %in% c("Saturday", "Sunday")), 2:7] <- NA

# La série temporelle est créée (début le 15 février 2020 = 46e jour de l'année 2020)
covidwe_ts <- ts(covidwe$parcs, start = c(2020, 46), frequency = 365)
plot(covidwe_ts)

# Agrégation par moyenne des valeurs par semaine
covidwe_ts2 <- aggregate(covidwe_ts, 52, FUN = collapse::fmean, ts.eps = 1/52)
plot(covidwe_ts2)
```

### Mobilité dans les transports en commun (TEC) 2020–2021

```{r result tec}
tec_extract <- extract(decomp_tec, components = "filtered")
plot(tec_extract,
  xlab = "Temps",
  ylab = "Tendance de mobilité dans les tec",
  main = "Evolution des tendances de mobilité pour les tec durant la période Covid")
```

L'analyse de la tendance montre une forte baisse de la mobilité dans les transports en commun au début de la période, en lien avec le premier confinement. Une reprise progressive s’observe ensuite au cours de l’année 2020, avant une nouvelle diminution à la fin de l’année lors du renforcement des restrictions. En 2021, la tendance repart à la hausse, indiquant une reprise plus durable de la mobilité, même si le niveau d’avant la pandémie n’est pas totalement retrouvé.

### Mobilité dans les parcs en 2020 et 2021

Création de l'objet ts pour une première analyse

```{r parcs_ts}
covid_parcs_ts <- ts(covid$parcs, start = c(2020, 46), end = c(2021, 365), frequency = 365)
covid_parcs_tsp <- aggregate(covid_parcs_ts, 52, FUN = collapse::fmean, ts.eps = 1/52)
plot(covid_parcs_tsp)
```

on peut voir que ....

pour pousuivre cette analyse on fait ...

```{r parcs local}
covid_parcs_local <- local.trend(covid_parcs_tsp)
```

En conclusion

### Mobilité dans 

## Discussion et Conclusion

<!--% En tenant compte du but de votre carnet de notes et de vos résultats, discutez de résultats et proposez des conclusions à votre analyse en 5 à 10 phrases. -->
